<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MathChallenge - Básico</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            text-align: center;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
            max-width: 600px;
            width: 90%;
        }
        
        h1 {
            color: #4a6fa5;
        }
        
        input, button {
            padding: 10px;
            margin: 10px;
            border-radius: 5px;
        }
        
        button {
            background-color: #4a6fa5;
            color: white;
            border: none;
            cursor: pointer;
        }
        
        button:hover {
            background-color: #3a5a8a;
        }
        
        #gameScreen {
            display: none;
        }
        
        .problem {
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .option {
            padding: 10px;
            background-color: #e0e8f5;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .option:hover {
            background-color: #d0dcf0;
        }
        
        .correct {
            background-color: #4caf50 !important;
            color: white;
        }
        
        .incorrect {
            background-color: #f44336 !important;
            color: white;
        }
        
        .status {
            display: flex;
            justify-content: space-between;
            background-color: #4a6fa5;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>MathChallenge</h1>
        
        <!-- Pantalla de Inicio -->
        <div id="loginScreen">
            <input type="text" id="nameInput" placeholder="Tu nombre de jugador">
            <button id="startButton">Comenzar Juego</button>
        </div>
        
        <!-- Pantalla de Juego -->
        <div id="gameScreen">
            <div class="status">
                <div>Jugador: <span id="playerName"></span></div>
                <div>Puntos: <span id="score">0</span></div>
                <div>Tiempo: <span id="timer">30</span>s</div>
            </div>
            
            <div class="problem" id="problem"></div>
            
            <div class="options" id="options">
                <!-- Opciones generadas dinámicamente -->
            </div>
            
            <div id="results" style="display: none;">
                <h2>¡Fin del Juego!</h2>
                <p>Puntuación Final: <span id="finalScore">0</span></p>
                <button id="restartButton">Jugar de Nuevo</button>
            </div>
        </div>
    </div>
    
    <script>
        // Variables
        let playerName = "";
        let score = 0;
        let timer = 30;
        let timerInterval;
        let currentProblem = {};
        
        // Elementos DOM
        const loginScreen = document.getElementById('loginScreen');
        const gameScreen = document.getElementById('gameScreen');
        const nameInput = document.getElementById('nameInput');
        const startButton = document.getElementById('startButton');
        const playerNameEl = document.getElementById('playerName');
        const scoreEl = document.getElementById('score');
        const timerEl = document.getElementById('timer');
        const problemEl = document.getElementById('problem');
        const optionsEl = document.getElementById('options');
        const resultsEl = document.getElementById('results');
        const finalScoreEl = document.getElementById('finalScore');
        const restartButton = document.getElementById('restartButton');
        
        // Evento de inicio
        startButton.onclick = function() {
            const name = nameInput.value.trim();
            if (name) {
                playerName = name;
                playerNameEl.textContent = name;
                loginScreen.style.display = 'none';
                gameScreen.style.display = 'block';
                startGame();
            } else {
                alert('Por favor ingresa tu nombre');
            }
        };
        
        // Reiniciar juego
        restartButton.onclick = function() {
            resultsEl.style.display = 'none';
            startGame();
        };
        
        // Iniciar juego
        function startGame() {
            score = 0;
            timer = 30;
            scoreEl.textContent = '0';
            timerEl.textContent = '30';
            generateProblem();
            timerInterval = setInterval(updateTimer, 1000);
        }
        
        // Actualizar temporizador
        function updateTimer() {
            timer--;
            timerEl.textContent = timer;
            
            if (timer <= 0) {
                clearInterval(timerInterval);
                showResults();
            }
        }
        
        // Generar problema
        function generateProblem() {
            // Generar números aleatorios
            const num1 = Math.floor(Math.random() * 10) + 1;
            const num2 = Math.floor(Math.random() * 10) + 1;
            
            // Elegir operación
            const operations = ['+', '-', '×'];
            const operation = operations[Math.floor(Math.random() * operations.length)];
            
            // Calcular resultado
            let correctAnswer;
            if (operation === '+') {
                correctAnswer = num1 + num2;
            } else if (operation === '-') {
                correctAnswer = Math.max(num1, num2) - Math.min(num1, num2);
            } else if (operation === '×') {
                correctAnswer = num1 * num2;
            }
            
            // Crear texto del problema
            let problemText;
            if (operation === '-' && num1 < num2) {
                problemText = `${num2} ${operation} ${num1}`;
            } else {
                problemText = `${num1} ${operation} ${num2}`;
            }
            
            // Generar opciones
            const options = [correctAnswer];
            while (options.length < 4) {
                const randomOption = Math.floor(Math.random() * 50) + 1;
                if (!options.includes(randomOption)) {
                    options.push(randomOption);
                }
            }
            
            // Mezclar opciones
            for (let i = options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [options[i], options[j]] = [options[j], options[i]];
            }
            
            // Guardar problema actual
            currentProblem = {
                text: problemText,
                options: options,
                correctAnswer: correctAnswer
            };
            
            // Mostrar problema
            displayProblem();
        }
        
        // Mostrar problema
        function displayProblem() {
            problemEl.textContent = currentProblem.text;
            optionsEl.innerHTML = '';
            
            currentProblem.options.forEach(option => {
                const optionEl = document.createElement('div');
                optionEl.className = 'option';
                optionEl.textContent = option;
                optionEl.onclick = function() {
                    checkAnswer(option);
                };
                optionsEl.appendChild(optionEl);
            });
        }
        
        // Verificar respuesta
        function checkAnswer(selectedAnswer) {
            const options = document.querySelectorAll('.option');
            
            // Deshabilitar opciones
            options.forEach(option => {
                option.style.pointerEvents = 'none';
                
                if (parseInt(option.textContent) === currentProblem.correctAnswer) {
                    option.classList.add('correct');
                } else if (parseInt(option.textContent) === selectedAnswer && selectedAnswer !== currentProblem.correctAnswer) {
                    option.classList.add('incorrect');
                }
            });
            
            // Comprobar respuesta
            if (selectedAnswer === currentProblem.correctAnswer) {
                score += 10;
                scoreEl.textContent = score;
            }
            
            // Siguiente problema
            setTimeout(function() {
                generateProblem();
            }, 1000);
        }
        
        // Mostrar resultados
        function showResults() {
            finalScoreEl.textContent = score;
            resultsEl.style.display = 'block';
        }
    </script>
</body>
</html>
